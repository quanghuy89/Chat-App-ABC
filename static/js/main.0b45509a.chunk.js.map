{"version":3,"sources":["firebase/config.js","firebase/services.js","components/Login/index.js","Context/AuthProvider.js","hooks/useFirestore.js","Context/AppProvider.js","components/ChatRoom/UserInfo.js","components/ChatRoom/RoomList.js","components/ChatRoom/Sidebar.js","components/ChatRoom/Message.js","components/ChatRoom/ChatWindow.js","components/ChatRoom/index.js","components/Modals/AddRoomModal.js","components/Modals/InviteMemberModal.js","App.js","reportWebVitals.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","analytics","auth","db","firestore","addDocument","collection","data","add","createdAt","FieldValue","serverTimestamp","generateKeywords","displayName","name","split","filter","word","length","flagArray","result","stringArray","i","findPermutation","k","push","join","reduce","acc","cur","words","arrName","curName","forEach","letter","createKeywords","Title","Typography","googleProvider","GoogleAuthProvider","Login","handleLogin","provider","a","signInWithPopup","additionalUserInfo","user","isNewUser","email","photoURL","uid","providerId","keywords","toLowerCase","justify","style","height","span","width","marginTop","marginLeft","src","preview","textAlign","level","background","color","borderRadius","onClick","AuthContext","React","createContext","AuthProvider","children","useState","setUser","history","useHistory","isLoading","setIsLoading","useEffect","unsubscibed","onAuthStateChanged","Provider","value","position","inset","useFirestore","condition","documents","setDocuments","collectionRef","orderBy","compareValue","where","fieldName","operator","onSnapshot","snapshot","docs","map","doc","id","AppContext","AppProvider","isAddRoomVisible","setIsAddRoomVisible","isInviteMemberVisible","setIsInviteMemberVisible","selectedRoomId","setSelectedRoomId","createdBy","useContext","roomsCondition","useMemo","rooms","selectedRoom","find","room","usersCondition","members","clearState","WrapperStyled","styled","div","UserInfo","className","charAt","toUpperCase","Text","ghost","signOut","Panel","Collapse","PanelStyled","LinkStyled","Link","RoomList","defaultActiveKey","header","type","icon","PlusSquareOutlined","SidebarStyled","Sidebar","formatDate","seconds","formattedDate","formatRelative","Date","slice","Message","text","own","hidden","size","title","Paragraph","HeaderStyled","ButtonGroupStyled","ContentStyled","FormStyled","Form","MessageListStyled","ChatWindow","inputValue","setInputValue","useForm","form","inputRef","useRef","messageListRef","handleOnSubmit","roomId","resetFields","current","setTimeout","focus","messages","scrollTop","scrollHeight","description","UserAddOutlined","Group","maxCount","member","ref","mes","Item","onChange","e","target","onPressEnter","placeholder","bordered","autoComplete","margin","message","showIcon","closable","ChatRoom","AddRoomModal","visible","onOk","getFieldsValue","onCancel","layout","label","TextArea","DebounceSelect","fetchOptions","debounceTimeout","curMembers","props","fetching","setFetching","options","setOptions","debounceFetcher","debounce","then","newOptions","labelInValue","filterOption","onSearch","notFoundContent","opt","Option","fetchUserList","search","limit","get","includes","InviteMemberModal","setValue","update","val","destroyOnClose","mode","newValue","App","component","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0b45509a.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\r\n\r\nimport \"firebase/analytics\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\n\r\nvar firebaseConfig = {\r\n\tapiKey: \"AIzaSyDJfTtDCI4XOGXaGLwxHxBaye4WcJI3Ywg\",\r\n\tauthDomain: \"chat-app-13a97.firebaseapp.com\",\r\n\tprojectId: \"chat-app-13a97\",\r\n\tstorageBucket: \"chat-app-13a97.appspot.com\",\r\n\tmessagingSenderId: \"1092770954741\",\r\n\tappId: \"1:1092770954741:web:21f035fb54b4e969ea74bc\",\r\n\tmeasurementId: \"G-WN6RD6FNZ8\"\r\n  };\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\nfirebase.analytics();\r\n\r\nconst auth = firebase.auth();\r\nconst db = firebase.firestore();\r\n\r\n// auth.useEmulator(\"http://localhost:9099\");\r\n// if (window.location.hostname === \"localhost\") {\r\n// \tdb.useEmulator(\"localhost\", \"8080\");\r\n// }\r\n\r\nexport { db, auth };\r\nexport default firebase;\r\n","import firebase, { db } from './config';\r\n\r\nexport const addDocument = (collection, data) => {\r\n  const query = db.collection(collection);\r\n\r\n  query.add({\r\n    ...data,\r\n    createdAt: firebase.firestore.FieldValue.serverTimestamp(),\r\n  });\r\n};\r\n\r\n// tao keywords cho displayName, su dung cho search\r\nexport const generateKeywords = (displayName) => {\r\n  // liet ke tat cac hoan vi. vd: name = [\"David\", \"Van\", \"Teo\"]\r\n  // => [\"David\", \"Van\", \"Teo\"], [\"David\", \"Teo\", \"Van\"], [\"Teo\", \"David\", \"Van\"],...\r\n  const name = displayName.split(' ').filter((word) => word);\r\n\r\n  const length = name.length;\r\n  let flagArray = [];\r\n  let result = [];\r\n  let stringArray = [];\r\n\r\n  /**\r\n   * khoi tao mang flag false\r\n   * dung de danh dau xem gia tri\r\n   * tai vi tri nay da duoc su dung\r\n   * hay chua\r\n   **/\r\n  for (let i = 0; i < length; i++) {\r\n    flagArray[i] = false;\r\n  }\r\n\r\n  const createKeywords = (name) => {\r\n    const arrName = [];\r\n    let curName = '';\r\n    name.split('').forEach((letter) => {\r\n      curName += letter;\r\n      arrName.push(curName);\r\n    });\r\n    return arrName;\r\n  };\r\n\r\n  function findPermutation(k) {\r\n    for (let i = 0; i < length; i++) {\r\n      if (!flagArray[i]) {\r\n        flagArray[i] = true;\r\n        result[k] = name[i];\r\n\r\n        if (k === length - 1) {\r\n          stringArray.push(result.join(' '));\r\n        }\r\n\r\n        findPermutation(k + 1);\r\n        flagArray[i] = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  findPermutation(0);\r\n\r\n  const keywords = stringArray.reduce((acc, cur) => {\r\n    const words = createKeywords(cur);\r\n    return [...acc, ...words];\r\n  }, []);\r\n\r\n  return keywords;\r\n};\r\n","import React from \"react\";\r\nimport { Row, Col, Button, Typography, Image } from \"antd\";\r\nimport firebase, { auth } from \"../../firebase/config\";\r\nimport { addDocument, generateKeywords } from \"../../firebase/services\";\r\n\r\nconst { Title } = Typography;\r\n\r\nconst googleProvider = new firebase.auth.GoogleAuthProvider();\r\n\r\nexport default function Login() {\r\n\tconst handleLogin = async (provider) => {\r\n\t\tconst { additionalUserInfo, user } = await auth.signInWithPopup(provider);\r\n\r\n\t\tif (additionalUserInfo?.isNewUser) {\r\n\t\t\taddDocument(\"users\", {\r\n\t\t\t\tdisplayName: user.displayName,\r\n\t\t\t\temail: user.email,\r\n\t\t\t\tphotoURL: user.photoURL,\r\n\t\t\t\tuid: user.uid,\r\n\t\t\t\tproviderId: additionalUserInfo.providerId,\r\n\t\t\t\tkeywords: generateKeywords(user.displayName?.toLowerCase()),\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Row justify=\"center\" style={{ height: 800 }}>\r\n\t\t\t\t<Col span={6}>\r\n\t\t\t\t\t<center>\r\n\t\t\t\t\t\t<Image\r\n\t\t\t\t\t\t\tstyle={{ width: 210, marginTop: 30, marginLeft: 10 }}\r\n\t\t\t\t\t\t\tsrc={\"logo.png\"}\r\n\t\t\t\t\t\t\tpreview={false}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</center>\r\n\t\t\t\t\t<Title style={{ textAlign: \"center\", marginTop: 15 }} level={2}>\r\n\t\t\t\t\t\tGroup04 Chat App\r\n\t\t\t\t\t</Title>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\t\t\tmarginTop: 25,\r\n\t\t\t\t\t\t\tbackground: \"lightblue\",\r\n\t\t\t\t\t\t\tcolor: \"black\",\r\n\t\t\t\t\t\t\tborderRadius: 10,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonClick={() => handleLogin(googleProvider)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tĐăng nhập bằng Google\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { auth } from '../firebase/config';\r\nimport { Spin } from 'antd';\r\n\r\nexport const AuthContext = React.createContext();\r\n\r\nexport default function AuthProvider({ children }) {\r\n  const [user, setUser] = useState({});\r\n  const history = useHistory();\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  React.useEffect(() => {\r\n    const unsubscibed = auth.onAuthStateChanged((user) => {\r\n      if (user) {\r\n        const { displayName, email, uid, photoURL } = user;\r\n        setUser({\r\n          displayName,\r\n          email,\r\n          uid,\r\n          photoURL,\r\n        });\r\n        setIsLoading(false);\r\n        history.push('/');\r\n        return;\r\n      }\r\n\r\n      // reset user info\r\n      setUser({});\r\n      setIsLoading(false);\r\n      history.push('/login');\r\n    });\r\n\r\n    // clean function\r\n    return () => {\r\n      unsubscibed();\r\n    };\r\n  }, [history]);\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user }}>\r\n      {isLoading ? <Spin style={{ position: 'fixed', inset: 0 }} /> : children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { db } from '../firebase/config';\r\n\r\nconst useFirestore = (collection, condition) => {\r\n  const [documents, setDocuments] = useState([]);\r\n\r\n  React.useEffect(() => {\r\n    let collectionRef = db.collection(collection).orderBy('createdAt');\r\n    if (condition) {\r\n      if (!condition.compareValue || !condition.compareValue.length) {\r\n        // reset documents data\r\n        setDocuments([]);\r\n        return;\r\n      }\r\n\r\n      collectionRef = collectionRef.where(\r\n        condition.fieldName,\r\n        condition.operator,\r\n        condition.compareValue\r\n      );\r\n    }\r\n\r\n    const unsubscribe = collectionRef.onSnapshot((snapshot) => {\r\n      const documents = snapshot.docs.map((doc) => ({\r\n        ...doc.data(),\r\n        id: doc.id,\r\n      }));\r\n\r\n      setDocuments(documents);\r\n    });\r\n\r\n    return unsubscribe;\r\n  }, [collection, condition]);\r\n\r\n  return documents;\r\n};\r\n\r\nexport default useFirestore;\r\n","import React, { useState } from 'react';\r\nimport useFirestore from '../hooks/useFirestore';\r\nimport { AuthContext } from './AuthProvider';\r\n\r\nexport const AppContext = React.createContext();\r\n\r\nexport default function AppProvider({ children }) {\r\n  const [isAddRoomVisible, setIsAddRoomVisible] = useState(false);\r\n  const [isInviteMemberVisible, setIsInviteMemberVisible] = useState(false);\r\n  const [selectedRoomId, setSelectedRoomId] = useState('');\r\n  let [createdBy] = useState('');\r\n\r\n  const {\r\n    user: { uid },\r\n  } = React.useContext(AuthContext);\r\n\r\n  const roomsCondition = React.useMemo(() => {\r\n    return {\r\n      fieldName: 'members',\r\n      operator: 'array-contains',\r\n      compareValue: uid,\r\n    };\r\n  }, [uid]);\r\n\r\n  const rooms = useFirestore('rooms', roomsCondition);\r\n\r\n  const selectedRoom = React.useMemo(\r\n    () => rooms.find((room) => room.id === selectedRoomId) || {},\r\n    [rooms, selectedRoomId]\r\n  );\r\n\r\n  createdBy = selectedRoom.createdBy;\r\n\r\n  const usersCondition = React.useMemo(() => {\r\n    return {\r\n      fieldName: 'uid',\r\n      operator: 'in',\r\n      compareValue: selectedRoom.members,\r\n    };\r\n  }, [selectedRoom.members]);\r\n\r\n  const members = useFirestore('users', usersCondition);\r\n\r\n  const clearState = () => {\r\n    setSelectedRoomId('');\r\n    setIsAddRoomVisible(false);\r\n    setIsInviteMemberVisible(false);\r\n  };\r\n\r\n  return (\r\n    <AppContext.Provider\r\n      value={{\r\n        rooms,\r\n        members,\r\n        selectedRoom,\r\n        createdBy,\r\n        isAddRoomVisible,\r\n        setIsAddRoomVisible,\r\n        selectedRoomId,\r\n        setSelectedRoomId,\r\n        isInviteMemberVisible,\r\n        setIsInviteMemberVisible,\r\n        clearState,\r\n      }}>\r\n      {children}\r\n    </AppContext.Provider>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Button, Avatar, Typography } from \"antd\";\r\nimport styled from \"styled-components\";\r\n\r\nimport { auth } from \"../../firebase/config\";\r\nimport { AuthContext } from \"../../Context/AuthProvider\";\r\nimport { AppContext } from \"../../Context/AppProvider\";\r\n\r\nconst WrapperStyled = styled.div`\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\tborder-bottom: 1px solid rgba(82, 38, 83);\r\n\tpadding: 12px 16px;\r\n\r\n\t.avatar {\r\n\t\tmargin-bottom: 6px;\r\n\t}\r\n\r\n\t.username {\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 18px;\r\n\t\tmargin-left: 10px;\r\n\t\tpadding: 10px 0px;\r\n\t}\r\n`;\r\n\r\n// export default function UserInfo() {\r\n\r\n// }\r\n\r\nexport default function UserInfo() {\r\n\tconst {\r\n\t\tuser: { displayName, photoURL },\r\n\t} = React.useContext(AuthContext);\r\n\tconst { clearState } = React.useContext(AppContext);\r\n\r\n\treturn (\r\n\t\t<WrapperStyled>\r\n\t\t\t<div>\r\n\t\t\t\t<Avatar className='avatar' src={photoURL}>\r\n\t\t\t\t\t{photoURL ? \"\" : displayName?.charAt(0)?.toUpperCase()}\r\n\t\t\t\t</Avatar>\r\n\t\t\t\t<Typography.Text className='username'>{displayName}</Typography.Text>\r\n\t\t\t</div>\r\n\t\t\t<Button\r\n\t\t\t\tghost\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\t// clear state in App Provider when logout\r\n\t\t\t\t\tclearState();\r\n\t\t\t\t\tauth.signOut();\r\n\t\t\t\t}}>\r\n\t\t\t\tĐăng xuất\r\n\t\t\t</Button>\r\n\t\t</WrapperStyled>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { Collapse, Typography, Button } from 'antd';\r\nimport styled from 'styled-components';\r\nimport { PlusSquareOutlined } from '@ant-design/icons';\r\nimport { AppContext } from '../../Context/AppProvider';\r\n\r\nconst { Panel } = Collapse;\r\n\r\nconst PanelStyled = styled(Panel)`\r\n  &&& {\r\n    .ant-collapse-header,\r\n    p {\r\n      color:white;\r\n      font-size:20px;\r\n    }\r\n\r\n    .ant-collapse-content-box {\r\n      padding: 0 40px;\r\n    }\r\n\r\n    .add-room {\r\n      color:white;\r\n      font-size:20px;\r\n      padding: 0;\r\n    }\r\n  }\r\n`;\r\n\r\nconst LinkStyled = styled(Typography.Link)`\r\n  display: block;\r\n  margin-bottom: 5px;\r\n  color:white;\r\n  font-size:20px;\r\n`;\r\n\r\nexport default function RoomList() {\r\n  const { rooms, setIsAddRoomVisible, setSelectedRoomId } = React.useContext(AppContext);\r\n\r\n  const handleAddRoom = () => {\r\n    setIsAddRoomVisible(true);\r\n  };\r\n\r\n  return (\r\n    <Collapse ghost defaultActiveKey={['1']}>\r\n      <PanelStyled header='Danh sách các phòng' key='1'>\r\n        {rooms.map((room) => (\r\n          <LinkStyled key={room.id} onClick={() => setSelectedRoomId(room.id)}>\r\n            {room.name}\r\n          </LinkStyled>\r\n        ))}\r\n        <Button\r\n          type='text'\r\n          icon={<PlusSquareOutlined />}\r\n          className='add-room'\r\n          onClick={handleAddRoom}>\r\n          Thêm phòng\r\n        </Button>\r\n      </PanelStyled>\r\n    </Collapse>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Row, Col } from 'antd';\r\nimport UserInfo from './UserInfo';\r\nimport RoomList from './RoomList';\r\nimport styled from 'styled-components';\r\n\r\nconst SidebarStyled = styled.div`\r\n  background: #a4508b;\r\n  background-image: linear-gradient(326deg, #a4508b 0%, #5f0a87 74%);\r\n\r\n  color: #000;\r\n  height: 100vh;\r\n`;\r\n\r\nexport default function Sidebar() {\r\n  return (\r\n    <SidebarStyled>\r\n      <Row>\r\n        <Col span={24}>\r\n          <UserInfo />\r\n        </Col>\r\n        <Col span={24}>\r\n          <RoomList />\r\n        </Col>\r\n      </Row>\r\n    </SidebarStyled>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Avatar, Typography } from \"antd\";\r\nimport styled from \"styled-components\";\r\nimport { formatRelative } from \"date-fns/esm\";\r\n\r\nconst WrapperStyled = styled.div`\r\n\t.message {\r\n\t\tmargin-bottom: 15px;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\r\n\t.author {\r\n\t\tmargin-left: 44px;\r\n\t\tmargin-bottom: 5px;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #848689;\r\n\t}\r\n\r\n\t.date {\r\n\t\tmargin-left: 10px;\r\n\t\tfont-size: 11px;\r\n\t\tcolor: #a7a7a7;\r\n\t}\r\n\r\n\t.content {\r\n\t\tmargin-left: 10px;\r\n\t\tbackground: rgb(245, 241, 241);\r\n\t\tcolor: black;\r\n\t\tborder-radius: 10px;\r\n\t\tmargin-bottom: 5px;\r\n\t\tfont-size: 15px;\r\n\t\tpadding: 10px;\r\n\t\tdisplay: inline-block;\r\n\t\tmax-width: 351px;\r\n\t}\r\n\r\n\t.message.own {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tmargin-bottom: 0px;\r\n\t\tmargin-right: 10px;\r\n\t\talign-items: flex-end;\r\n\t}\r\n\r\n\t.message.own .content {\r\n\t\tbackground: lightblue;\r\n\t\tcolor: black;\r\n\t\tborder-radius: 10px;\r\n\t\tfont-size: 15px;\r\n\t\tpadding: 10px;\r\n\t\tmargin-bottom: 10px;\r\n\t\tdisplay: inline-block;\r\n\t\tmax-width: 351px;\r\n\t}\r\n`;\r\n\r\nfunction formatDate(seconds) {\r\n\tlet formattedDate = \"\";\r\n\r\n\tif (seconds) {\r\n\t\tformattedDate = formatRelative(new Date(seconds * 1000), new Date());\r\n\r\n\t\tformattedDate =\r\n\t\t\tformattedDate.charAt(0).toUpperCase() + formattedDate.slice(1);\r\n\t}\r\n\r\n\treturn formattedDate;\r\n}\r\n\r\nexport default function Message({\r\n\ttext,\r\n\tdisplayName,\r\n\tcreatedAt,\r\n\tphotoURL,\r\n\town,\r\n}) {\r\n\treturn (\r\n\t\t<WrapperStyled>\r\n\t\t\t<div className={own ? \"message own\" : \"message\"}>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Typography.Text className='author' hidden={own}>\r\n\t\t\t\t\t\t{displayName}\r\n\t\t\t\t\t</Typography.Text>\r\n\t\t\t\t\t<Typography.Text className='date' hidden={own}>\r\n\t\t\t\t\t\t{formatDate(createdAt?.seconds)}\r\n\t\t\t\t\t</Typography.Text>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\tsize='medium'\r\n\t\t\t\t\t\tsrc={photoURL}\r\n\t\t\t\t\t\ttitle={own ? \"You\" : displayName}>\r\n\t\t\t\t\t\t{photoURL ? \"\" : displayName?.charAt(0)?.toUpperCase()}\r\n\t\t\t\t\t</Avatar>\r\n\t\t\t\t\t<Typography.Paragraph\r\n\t\t\t\t\t\tclassName='content'\r\n\t\t\t\t\t\ttitle={formatDate(createdAt?.seconds)}>\r\n\t\t\t\t\t\t{text}\r\n\t\t\t\t\t</Typography.Paragraph>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</WrapperStyled>\r\n\t);\r\n}\r\n","import { UserAddOutlined } from \"@ant-design/icons\";\r\nimport React, { useContext, useEffect, useRef, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Button, Tooltip, Avatar, Form, Input, Alert } from \"antd\";\r\nimport Message from \"./Message\";\r\nimport { AppContext } from \"../../Context/AppProvider\";\r\nimport { addDocument } from \"../../firebase/services\";\r\nimport { AuthContext } from \"../../Context/AuthProvider\";\r\nimport useFirestore from \"../../hooks/useFirestore\";\r\n\r\nconst HeaderStyled = styled.div`\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\theight: 56px;\r\n\tpadding: 0 16px;\r\n\talign-items: center;\r\n\tborder-bottom: 1px solid rgb(230, 230, 230);\r\n\r\n\tbackground-color: #37e2d5;\r\n\r\n\t.header {\r\n\t\t&__info {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\tjustify-content: center;\r\n\t\t}\r\n\r\n\t\t&__title {\r\n\t\t\tmargin: 0;\r\n\t\t\tfont-weight: bold;\r\n\t\t}\r\n\r\n\t\t&__description {\r\n\t\t\tfont-size: 12px;\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nconst ButtonGroupStyled = styled.div`\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n`;\r\n\r\nconst WrapperStyled = styled.div`\r\n\theight: 100vh;\r\n`;\r\n\r\nconst ContentStyled = styled.div`\r\n\theight: calc(100% - 56px);\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tpadding: 11px;\r\n\tjustify-content: flex-end;\r\n`;\r\n\r\nconst FormStyled = styled(Form)`\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tmargin-top: 10px;\r\n\tpadding: 2px 2px 2px 2px;\r\n\tborder: 2px solid black;\r\n\tborder-radius: 10px;\r\n\r\n\t.ant-form-item {\r\n\t\tflex: 1;\r\n\t\tmargin-bottom: 0;\r\n\t}\r\n\r\n\t.btn-submit {\r\n\t\tbackground: lightblue;\r\n\t\tcolor: black;\r\n\t\tborder-radius: 10px;\r\n\t}\r\n`;\r\n\r\nconst MessageListStyled = styled.div`\r\n\tmax-height: 100%;\r\n\toverflow-y: auto;\r\n`;\r\n\r\nexport default function ChatWindow() {\r\n\tconst { selectedRoom, createdBy, members, setIsInviteMemberVisible } =\r\n\t\tuseContext(AppContext);\r\n\tconst {\r\n\t\tuser: { uid, photoURL, displayName },\r\n\t} = useContext(AuthContext);\r\n\tconst [inputValue, setInputValue] = useState(\"\");\r\n\tconst [form] = Form.useForm();\r\n\tconst inputRef = useRef(null);\r\n\tconst messageListRef = useRef(null);\r\n\r\n\tconst handleInputChange = (e) => {\r\n\t\tsetInputValue(e.target.value);\r\n\t};\r\n\r\n\tconst handleOnSubmit = () => {\r\n\t\taddDocument(\"messages\", {\r\n\t\t\ttext: inputValue,\r\n\t\t\tuid,\r\n\t\t\tphotoURL,\r\n\t\t\troomId: selectedRoom.id,\r\n\t\t\tdisplayName,\r\n\t\t});\r\n\r\n\t\tform.resetFields([\"message\"]);\r\n\r\n\t\t// focus to input again after submit\r\n\t\tif (inputRef?.current) {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tinputRef.current.focus();\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst condition = React.useMemo(\r\n\t\t() => ({\r\n\t\t\tfieldName: \"roomId\",\r\n\t\t\toperator: \"==\",\r\n\t\t\tcompareValue: selectedRoom.id,\r\n\t\t}),\r\n\t\t[selectedRoom.id]\r\n\t);\r\n\r\n\tconst messages = useFirestore(\"messages\", condition);\r\n\r\n\tuseEffect(() => {\r\n\t\t// scroll to bottom after message changed\r\n\t\tif (messageListRef?.current) {\r\n\t\t\tmessageListRef.current.scrollTop =\r\n\t\t\t\tmessageListRef.current.scrollHeight + 50;\r\n\t\t}\r\n\t}, [messages]);\r\n\r\n\treturn (\r\n\t\t<WrapperStyled>\r\n\t\t\t{selectedRoom.id ? (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<HeaderStyled>\r\n\t\t\t\t\t\t<div className='header__info'>\r\n\t\t\t\t\t\t\t<p className='header__title'>{selectedRoom.name}</p>\r\n\t\t\t\t\t\t\t<span className='header__description'>\r\n\t\t\t\t\t\t\t\t{selectedRoom.description}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<ButtonGroupStyled>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\ticon={<UserAddOutlined />}\r\n\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\tonClick={() => setIsInviteMemberVisible(true)}>\r\n\t\t\t\t\t\t\t\tInvite\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Avatar.Group size='small' maxCount={2}>\r\n\t\t\t\t\t\t\t\t{members.map((member) => (\r\n\t\t\t\t\t\t\t\t\t<Tooltip title={member.displayName} key={member.id}>\r\n\t\t\t\t\t\t\t\t\t\t<Avatar src={member.photoURL}>\r\n\t\t\t\t\t\t\t\t\t\t\t{member.photoURL\r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: member.displayName?.charAt(0)?.toUpperCase()}\r\n\t\t\t\t\t\t\t\t\t\t</Avatar>\r\n\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</Avatar.Group>\r\n\t\t\t\t\t\t</ButtonGroupStyled>\r\n\t\t\t\t\t</HeaderStyled>\r\n\t\t\t\t\t<ContentStyled>\r\n\t\t\t\t\t\t<MessageListStyled ref={messageListRef}>\r\n\t\t\t\t\t\t\t{messages.map((mes) => (\r\n\t\t\t\t\t\t\t\t<Message\r\n\t\t\t\t\t\t\t\t\tkey={mes.id}\r\n\t\t\t\t\t\t\t\t\ttext={mes.text}\r\n\t\t\t\t\t\t\t\t\tphotoURL={mes.photoURL}\r\n\t\t\t\t\t\t\t\t\tdisplayName={mes.displayName}\r\n\t\t\t\t\t\t\t\t\tcreatedAt={mes.createdAt}\r\n\t\t\t\t\t\t\t\t\town={mes.uid === uid ? true : false}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</MessageListStyled>\r\n\t\t\t\t\t\t<FormStyled form={form}>\r\n\t\t\t\t\t\t\t<Form.Item name='message'>\r\n\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\tref={inputRef}\r\n\t\t\t\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\t\t\t\tonPressEnter={handleOnSubmit}\r\n\t\t\t\t\t\t\t\t\tplaceholder='Enter message...'\r\n\t\t\t\t\t\t\t\t\tbordered={false}\r\n\t\t\t\t\t\t\t\t\tautoComplete='off'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tclassName='btn-submit'\r\n\t\t\t\t\t\t\t\ttype='primary'\r\n\t\t\t\t\t\t\t\tonClick={handleOnSubmit}\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tcolor: \"black\",\r\n\t\t\t\t\t\t\t\t\twidth: 100,\r\n\t\t\t\t\t\t\t\t\tborderRadius: 10,\r\n\t\t\t\t\t\t\t\t\tmargin: 5,\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tSend\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</FormStyled>\r\n\t\t\t\t\t</ContentStyled>\r\n\t\t\t\t</>\r\n\t\t\t) : (\r\n\t\t\t\t<Alert\r\n\t\t\t\t\tmessage='Hãy chọn phòng'\r\n\t\t\t\t\ttype='info'\r\n\t\t\t\t\tshowIcon\r\n\t\t\t\t\tstyle={{ margin: 10 }}\r\n\t\t\t\t\tclosable\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t</WrapperStyled>\r\n\t);\r\n}\r\n","import React from \"react\";\r\nimport { Row, Col } from \"antd\";\r\nimport Sidebar from \"./Sidebar\";\r\nimport ChatWindow from \"./ChatWindow\";\r\n\r\nexport default function ChatRoom() {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Row>\r\n\t\t\t\t<Col span={6}>\r\n\t\t\t\t\t<Sidebar />\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col span={18}>\r\n\t\t\t\t\t<ChatWindow />\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useContext } from 'react';\r\nimport { Form, Modal, Input } from 'antd';\r\nimport { AppContext } from '../../Context/AppProvider';\r\nimport { addDocument } from '../../firebase/services';\r\nimport { AuthContext } from '../../Context/AuthProvider';\r\n\r\nexport default function AddRoomModal() {\r\n  const { isAddRoomVisible, setIsAddRoomVisible } = useContext(AppContext);\r\n  const {\r\n    user: { uid },\r\n  } = useContext(AuthContext);\r\n  const [form] = Form.useForm();\r\n\r\n  const handleOk = () => {\r\n    // handle logic\r\n    // add new room to firestore\r\n    addDocument('rooms', {\r\n      ...form.getFieldsValue(),\r\n      createdBy: uid,\r\n      members: [uid],\r\n    });\r\n\r\n    // reset form value\r\n    form.resetFields();\r\n\r\n    setIsAddRoomVisible(false);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    // reset form value\r\n    form.resetFields();\r\n\r\n    setIsAddRoomVisible(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Modal title='Tạo phòng' visible={isAddRoomVisible} onOk={handleOk} onCancel={handleCancel}>\r\n        <Form form={form} layout='vertical'>\r\n          <Form.Item label='Tên phòng' name='name'>\r\n            <Input placeholder='Nhập tên phòng' />\r\n          </Form.Item>\r\n          <Form.Item label='Mô tả' name='description'>\r\n            <Input.TextArea placeholder='Nhập mô tả' />\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useState } from 'react';\r\nimport { Form, Modal, Select, Spin, Avatar } from 'antd';\r\nimport { AppContext } from '../../Context/AppProvider';\r\nimport { debounce } from 'lodash';\r\nimport { db } from '../../firebase/config';\r\n\r\nfunction DebounceSelect({ fetchOptions, debounceTimeout = 300, curMembers, ...props }) {\r\n  // Search: abcddassdfasdf\r\n\r\n  const [fetching, setFetching] = useState(false);\r\n  const [options, setOptions] = useState([]);\r\n\r\n  const debounceFetcher = React.useMemo(() => {\r\n    const loadOptions = (value) => {\r\n      setOptions([]);\r\n      setFetching(true);\r\n\r\n      fetchOptions(value, curMembers).then((newOptions) => {\r\n        setOptions(newOptions);\r\n        setFetching(false);\r\n      });\r\n    };\r\n\r\n    return debounce(loadOptions, debounceTimeout);\r\n  }, [debounceTimeout, fetchOptions, curMembers]);\r\n\r\n  React.useEffect(() => {\r\n    return () => {\r\n      // clear when unmount\r\n      setOptions([]);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <Select\r\n      labelInValue\r\n      filterOption={false}\r\n      onSearch={debounceFetcher}\r\n      notFoundContent={fetching ? <Spin size='small' /> : null}\r\n      {...props}>\r\n      {options.map((opt) => (\r\n        <Select.Option key={opt.value} value={opt.value} title={opt.label}>\r\n          <Avatar size='small' src={opt.photoURL}>\r\n            {opt.photoURL ? '' : opt.label?.charAt(0)?.toUpperCase()}\r\n          </Avatar>\r\n          {` ${opt.label}`}\r\n        </Select.Option>\r\n      ))}\r\n    </Select>\r\n  );\r\n}\r\n\r\nasync function fetchUserList(search, curMembers) {\r\n  return db\r\n    .collection('users')\r\n    .where('keywords', 'array-contains', search?.toLowerCase())\r\n    .orderBy('displayName')\r\n    .limit(20)\r\n    .get()\r\n    .then((snapshot) => {\r\n      return snapshot.docs\r\n        .map((doc) => ({\r\n          label: doc.data().displayName,\r\n          value: doc.data().uid,\r\n          photoURL: doc.data().photoURL,\r\n        }))\r\n        .filter((opt) => !curMembers.includes(opt.value));\r\n    });\r\n}\r\n\r\nexport default function InviteMemberModal() {\r\n  const { isInviteMemberVisible, setIsInviteMemberVisible, selectedRoomId, selectedRoom } =\r\n    useContext(AppContext);\r\n  const [value, setValue] = useState([]);\r\n  const [form] = Form.useForm();\r\n\r\n  const handleOk = () => {\r\n    // reset form value\r\n    form.resetFields();\r\n    setValue([]);\r\n\r\n    // update members in current room\r\n    const roomRef = db.collection('rooms').doc(selectedRoomId);\r\n\r\n    roomRef.update({\r\n      members: [...selectedRoom.members, ...value.map((val) => val.value)],\r\n    });\r\n\r\n    setIsInviteMemberVisible(false);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    // reset form value\r\n    form.resetFields();\r\n    setValue([]);\r\n\r\n    setIsInviteMemberVisible(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Modal\r\n        title='Mời thêm thành viên'\r\n        visible={isInviteMemberVisible}\r\n        onOk={handleOk}\r\n        onCancel={handleCancel}\r\n        destroyOnClose={true}>\r\n        <Form form={form} layout='vertical'>\r\n          <DebounceSelect\r\n            mode='multiple'\r\n            name='search-user'\r\n            label='Tên các thành viên'\r\n            value={value}\r\n            placeholder='Nhập tên thành viên'\r\n            fetchOptions={fetchUserList}\r\n            onChange={(newValue) => setValue(newValue)}\r\n            style={{ width: '100%' }}\r\n            curMembers={selectedRoom.members}\r\n          />\r\n        </Form>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n","import \"./App.css\";\r\nimport Login from \"./components/Login\";\r\nimport { Route, Switch, BrowserRouter } from \"react-router-dom\";\r\nimport ChatRoom from \"./components/ChatRoom\";\r\nimport AuthProvider from \"./Context/AuthProvider\";\r\nimport AppProvider from \"./Context/AppProvider\";\r\nimport AddRoomModal from \"./components/Modals/AddRoomModal\";\r\nimport InviteMemberModal from \"./components/Modals/InviteMemberModal\";\r\n\r\nfunction App() {\r\n\treturn (\r\n\t\t<BrowserRouter>\r\n\t\t\t<AuthProvider>\r\n\t\t\t\t<AppProvider>\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Route component={Login} path=\"/login\" />\r\n\t\t\t\t\t\t<Route component={ChatRoom} path=\"/\" />\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t\t<AddRoomModal />\r\n\t\t\t\t\t<InviteMemberModal />\r\n\t\t\t\t</AppProvider>\r\n\t\t\t</AuthProvider>\r\n\t\t</BrowserRouter>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}